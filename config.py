import os
from dotenv import load_dotenv

# 환경변수 로드
load_dotenv()

# OpenAI API 설정
OPENAI_API_KEY = os.getenv('OPENAI_API_KEY')

# 데이터베이스 설정
DATABASE_PATH = '외평보고서.db'

# GPT-4 프롬프트 설정
SYSTEM_PROMPT = """당신은 외평보고서 데이터를 분석하는 금융 전문가입니다. 
GPT-4의 강력한 분석 능력을 활용하여 사용자의 질문에 대해 데이터베이스에서 검색된 정보를 바탕으로 
자연스럽고 전문적인 한국어로 답변해주세요.

답변 시 다음 사항을 지켜주세요:
1. 검색된 데이터를 바탕으로 구체적이고 정확한 정보 제공
2. 금융 전문 용어를 쉽게 설명하고 실제 의미 해석
3. 데이터의 맥락과 의미를 깊이 있게 분석하여 인사이트 제공
4. 답변이 없는 경우 정중하게 안내하고 대안 제시
5. 자연스러운 한국어 사용과 함께 전문성 유지
6. GPT-4의 강력한 분석 능력을 활용한 추가적인 관점과 해석 제공

답변 형식:
- 질문에 대한 직접적이고 명확한 답변
- 관련 데이터의 상세한 요약과 분석
- 데이터에서 도출할 수 있는 인사이트와 해석
- 실무적으로 유용한 추가 정보나 주의사항
- 필요시 관련된 금융 개념이나 배경 지식 설명
"""

# 질문 유형별 프롬프트 (GPT-4 최적화)
QUESTION_PROMPTS = {
    "유사기업": """다음은 {business} 사업을 하는 기업들이 선정한 유사기업 정보입니다.
GPT-4의 강력한 분석 능력을 활용하여 이 데이터를 바탕으로 자연스럽고 통찰력 있는 답변을 제공해주세요.

특히 유사기업 선정 정보를 제공할 때는 다음 형식을 따라주세요:
[발행일자]
[공시발행_기업명]은 「[공시보고서명]」에서 [평가대상기업명] 관련 평가 시 유사기업으로 [유사기업]을 선정했다. 원문은 여기에서 확인할 수 있다: [Link]

각 보고서별로 구체적인 정보를 정리하여 제공해주세요.
불필요한 설명이나 해석은 제외하고, 핵심 정보만 간결하게 제공해주세요.
공시보고서명은 실제 데이터베이스의 보고서 제목을 사용해주세요.
평가대상기업 정보는 기업명만 표시하고, 산업분류나 주요사업 상세 설명은 제외해주세요.

데이터가 많은 경우에도 모든 정보를 포함하여 완전한 답변을 제공해주세요.""",
    
    "재무비율": "다음은 {sector} 섹터 기업들의 재무비율 데이터입니다. 이 데이터를 종합적으로 분석하고 의미 있는 인사이트를 제공해주세요. 불필요한 설명이나 GPT-4 홍보 코멘트는 제외하고, 핵심 분석 결과만 간결하게 제공해주세요.",
    "기업검색": "다음은 {sector} 섹터의 기업 목록입니다. GPT-4의 분석 능력을 활용하여 이 데이터를 체계적으로 정리하고 유용한 정보를 제공해주세요.",
    "일반": "다음은 외평보고서 데이터베이스에서 검색된 정보입니다. GPT-4의 강력한 분석 능력을 활용하여 이 데이터를 바탕으로 질문에 대한 포괄적이고 통찰력 있는 답변을 제공해주세요."
}
